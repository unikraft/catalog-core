#!/bin/sh

if test ! -f "workdir/build/sqlite_xen-arm64"; then
    echo "No kernel file workdir/build/sqlite_xen-arm64." 1>&2
    echo "Did you run ./scripts/build/xen.arm64 ?" 1>&2
    exit 1
fi

# Pack filesystem as an initial ramdisk CPIO file.
rm -f initrd.cpio
../repos/unikraft/support/scripts/mkcpio initrd.cpio ./rootfs/

sudo xl create -c xen.arm64.cfg